{% extends "base.html" %} 

{% load static %}

{% block title %}Ticket Details{% endblock title %} 

{% block content %}
    <div class="pagetitle">
        <h1>Dashboard</h1>
        <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url "dashboard" %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url "all-tickets" %}">Tickets</a></li>
            <li class="breadcrumb-item active">{{selected_ticket.ticket_number}}</li>
        </ol>
        </nav>
    </div>
    <!-- End Page Title -->

    <section class="section">
        <div class="row">
            <div class="col-lg-7">
                <div class="card">
                    <div class="card-body ticket">
                        <h2 class="pt-3">Summary: {{ selected_ticket.summary }}</h3>
                        <hr class="mt-3">
                        <button type="button" class="btn btn-secondary btn-sm"><i class="bi bi-paperclip"></i> Upload</button>
                        <button type="button" class="btn btn-secondary btn-sm"><i class="bi bi-pencil-square"></i> Edit</button>
                        <button type="button" class="btn btn-secondary btn-sm"><i class="bi bi-arrow-right-circle"></i> Transfer</button>

                        <div class="mt-5">Issue Type: {{ selected_ticket.issue_type }}</div>
                        <div class="mt-5">Description: {{ selected_ticket.description }}</div>

                    </div>
                </div>
            </div>

            <div class="col-lg-3">
                <div class="card">
                    <div class="card-body">
                        <div class="mb-5">
                            <h5 class="card-title">Ticket Details</h5>
                            <p class="badge rounded-pill text-bg-success">{{ selected_ticket.status }}</p>
                            <p class=""><i class="bi bi-calendar"></i> Created on {{ selected_ticket.created_at }}</p>
                            <p class=""><i class="bi bi-calendar"></i> Last updated {{ selected_ticket.updated_at }}</p>
                        </div>

                        <hr class="">
                        
                        <div class="mb-5">
                            <h5 class="card-title ">Assignees</h5>
                            {% if selected_ticket.assigned_agent.avatar %}
                            <img src="{{ selected_ticket.assigned_agent.avatar.url }}" alt="Profile" class="rounded-circle asignee-avatar" />
                            {{ selected_ticket.assigned_agent.get_full_name }}
                            {% endif %}
                        </div>

                        <hr class="">

                        <div class="mb-5">
                            <h5 class="card-title">Created By:</h5>
                            {% if selected_ticket.created_by.avatar %}
                            <img src="{{ selected_ticket.created_by.avatar.url }}" alt="Profile" class="rounded-circle asignee-avatar" />
                            {{ selected_ticket.created_by.get_full_name }}
                            {% endif %}
                        </div>

                        <hr class="">

                        <div class="mb-5">
                            <h5 class="card-title">Contact Details</h5>
                            <div>Email: {{selected_ticket.created_by.email}}</div>
                            <div>Phone: {{selected_ticket.created_by.phone}}</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

<!-- End #main -->

{% endblock content %}
